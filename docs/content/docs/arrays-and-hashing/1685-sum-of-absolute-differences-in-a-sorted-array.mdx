---
title: 1685. Sum of Absolute Differences in a Sorted Array
difficulty: medium
tags: [arrays, prefix-sum, math]
---

import Code from '@/components/Code';

## Problem Statement

You are given an integer array `nums` sorted in non-decreasing order. Build and return an integer array `result` with the same length as `nums` such that `result[i]` is equal to the summation of absolute differences between `nums[i]` and all the other elements in the array.

[View on LeetCode →](https://leetcode.com/problems/sum-of-absolute-differences-in-a-sorted-array/)

---

## Examples

### Example 1

```
Input: nums = [2, 3, 5]
Output: [4, 3, 5]
Explanation:
result[0] = |2-2| + |2-3| + |2-5| = 0 + 1 + 3 = 4
result[1] = |3-2| + |3-3| + |3-5| = 1 + 0 + 2 = 3
result[2] = |5-2| + |5-3| + |5-5| = 3 + 2 + 0 = 5
```

### Example 2

```
Input: nums = [1, 4, 6, 8, 10]
Output: [24, 15, 13, 15, 21]
```

---

## Approach

We use a **prefix-sum and carry-forward** technique to compute each result in O(1) after an O(n) prefix sum setup.

For a sorted array, because all numbers before index `i` are ≤ `nums[i]` and all numbers after index `i` are ≥ `nums[i]`, the result at index 0 is simply `sum - n * nums[0]`.

For subsequent indices, the change from index `i-1` to `i` can be expressed using the difference `diff = nums[i] - nums[i-1]`:
- Numbers to the left (count = `i`): each difference increases by `diff`.
- Numbers to the right (count = `n - i`): each difference decreases by `diff`.

So: `result[i] = i * diff + result[i-1] - (n - i) * diff`

---

## Complexity Analysis

**Time Complexity:** O(n), we make two passes through the array.

**Space Complexity:** O(n), for the result array.

---

## Solutions

### Go

<Code problemNumber={1685} difficulty="medium" lang="go" />

---

## Key Insights

- Leverage the sorted property: split elements into "left of i" (all smaller) and "right of i" (all larger) to avoid absolute value complexity.
- The recurrence `result[i] = result[i-1] + i*diff - (n-i)*diff` propagates cheaply without recomputing from scratch.
- This is a classic prefix-sum pattern where you compute first value explicitly then derive the rest incrementally.
