---
title: 239. Sliding Window Maximum
difficulty: hard
tags: [sliding-window, deque]
---

import Code from '@/components/Code';

## Problem Statement

You are given an array of integers `nums` and an integer `k`. There is a sliding window of size `k` moving from the left to the right. You can only see the `k` numbers in the window. Return an array of the maximum values in each window position.

[View on LeetCode →](https://leetcode.com/problems/sliding-window-maximum/)

---

## Examples

### Example 1

```
Input: nums = [1, 3, -1, -3, 5, 3, 6, 7], k = 3
Output: [3, 3, 5, 5, 6, 7]
Explanation:
  Window [1,3,-1]  → max 3
  Window [3,-1,-3] → max 3
  Window [-1,-3,5] → max 5
  Window [-3,5,3]  → max 5
  Window [5,3,6]   → max 6
  Window [3,6,7]   → max 7
```

### Example 2

```
Input: nums = [1], k = 1
Output: [1]
```

---

## Approach

Uses a **monotonic decreasing deque** to maintain candidate maximums:

* For each new element at index `i`:
  1. Remove from the **back** of the deque any indices whose values are ≤ `nums[i]` (they can never be the max while `nums[i]` is in the window).
  2. Append `i` to the back.
  3. Remove from the **front** if the index has slid out of the window (`deque[0] <= i - k`).
  4. Once `i >= k - 1`, append `nums[deque[0]]` to the result.

The front of the deque always holds the index of the current window's maximum.

---

## Complexity Analysis

**Time Complexity:** O(n) — each index is pushed and popped at most once.

**Space Complexity:** O(k) for the deque.

---

## Solutions

### Python

<Code problemNumber={239} difficulty="hard" lang="python" />

### C++

<Code problemNumber={239} difficulty="hard" lang="cpp" />

### Java

<Code problemNumber={239} difficulty="hard" lang="java" />

---

## Key Insights

- The deque stores **indices**, not values — this allows checking whether the front element has left the window.
- Removing smaller elements from the back maintains the decreasing invariant and ensures the front is always the max.
- Each element is enqueued and dequeued at most once → O(n) total work despite the nested while loop.
